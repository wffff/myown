<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head th:replace="fragment/header :: header"></head>
<body class="hold-transition skin-blue sidebar-mini">
<div class="wrapper">
    <header class="main-header">
        <div th:replace="fragment/head :: head"></div>
    </header>
    <aside class="main-sidebar">
        <div th:replace="fragment/left :: left"></div>
    </aside>
    <div class="content-wrapper">
    <section class="content-header">
        <h1>
            头像设置
        </h1>
    </section>
    <!-- Main content -->
    <section class="content">
        <div class="row">
            <div class="col-xs-12">
                <div class="box">
                    <div class="box-body">
                        <input id="f_upload" name="file" type="file" class="file" />
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script>
        $("#f_upload").fileinput({
            language: 'zh', //设置语言
            uploadUrl:"/user/change/avatar", //上传的地址
            allowedPreviewTypes: ['image'],
            allowedFileExtensions: ['jpg', 'gif', 'png','jpeg'],//接收的文件后缀
            uploadAsync: true, //默认异步上传
            showUpload:true, //是否显示上传按钮
            showRemove :true, //显示移除按钮
            showPreview :true, //是否显示预览
            showCaption:false,//是否显示标题
            browseClass:"btn btn-primary", //按钮样式
            dropZoneEnabled: false,//是否显示拖拽区域
            maxFileCount:1, //表示允许同时上传的最大文件个数
            enctype:'multipart/form-data',
            validateInitialCount:true,
            previewFileIcon: "<iclass='glyphicon glyphicon-king'></i>",
            msgFilesTooMany: "选择上传的文件数量({n}) 超过允许的最大数值{m}！",
        }).on("fileuploaded", function (event, data, previewId, index){
            $(event.target)
                .fileinput('clear')
                .fileinput('unlock');
          toastr.success("头像更换成功,下次登录即可切换");
        });
    </script>
    </div>
    <footer class="main-footer">
        <div th:replace="fragment/foot :: foot"></div>
    </footer>
</div>
</body>
</html>